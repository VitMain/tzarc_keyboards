# Djinn Rev1 BOM

## Build Notes

During the build, the connectors for the USB-C, the TRS jack, and the LCD 1x09 connector **need to be mounted on the side opposite to the rest of the surface-mount components**. For ease of the build, it's best to populate and solder these onto the board last. The 1x09 LCD connector can also be soldered with the LCD screwed into the board with standoffs, in order to ensure proper alignment.

Most "jellybean" components can be swapped out for whichever you've got available -- 100nF capacitors are so ubiquitous that there's no need to buy this specific part. Any other 0805 100nF capacitor will likely suffice.

The "IC (Current Limiter)" chip has two alternatives that perform the same function, with the same pinout, and are drop-in replacements of each other. Depending on stock levels at LCSC, one might not be available (as was the case when the Djinn was designed), so either can be used. Please only purchase one type -- you don't need both. These chips do have poor performance at low currents, i.e. the standard <500mA USB current range. As a result, if you push the LEDs too hard (full white, for instance) they'll flicker and sometimes "brown out" -- this is 100% intentional and is not a sign that something is wrong with your build -- this is a safety mechanism to prevent pulling too much current from the USB port. Sane limits have already been set in firmware to prevent over-current scenarios. In future, once the firmware matures, the limit will be dynamically controlled based on the USB-C power delivery state -- this is not yet implemented, but the hardware has been designed to do so.

The "Connector (ST-Link)" **is optional** and is not required -- this is a debugging port for an ST-Link. If you choose to do so, it can be mounted with the pins straddling the edge of the PCB.

There are a few sets of solder bridges that need to be filled in to get certain aspects working:

* USB-C CC Line solder bridges (solder none or one pair only):
    * (Optional) 5.1k -- 2 separate solder bridges that connect 5.1k resistors to the USB-C CC lines in order to "ask" for 3.0A from the upstream port. This is not guaranteed to automatically allow 3.0A of current, and the firmware will eventually deal with this correctly.
    * (Optional) USBPD -- 2 separate solder bridges that connect the MCU to the USB-C CC lines in order to enable USBPD functionality. This is not yet built into the firmware and for all intents and purposes should not be assumed to work. Leave these unsoldered unless you know exactly what you're doing.
    * If neither of the above pairs of solder bridges have been soldered, the Djinn will work in standard USB2.0 mode without attempting to run at a higher current than 500mA.
* LCD_Left / LCD_Right -- 9 separate solder bridges that connect the LCD connector to the normal lines required to actually drive the LCD. You'll note that these are populated in the same location on both sides of the board -- only the side being built should have the solder bridges filled in. Left-hand should have LCD_Left soldered, right-hand should have LCD_Right soldered.

## Components listing

| Type                            | Count (Total) | Count (Per PCB) | Value       | Footprint | Part Number          | Link                                                                                                                                                                                    |
|---------------------------------|---------------|-----------------|-------------|-----------|----------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Capacitor (MLCC)                | 110           | 55              | 100nF       | 0805      | CL21F104ZBCNNNC      | https://lcsc.com/product-detail/Multilayer-Ceramic-Capacitors-MLCC-SMD-SMT_Samsung-Electro-Mechanics-CL21F104ZBCNNNC_C1760.html                                                         |
| Capacitor (MLCC)                | 2             | 1               | 4.7nF       | 0805      | CC0805KRX7R9BB472    | https://lcsc.com/product-detail/Multilayer-Ceramic-Capacitors-MLCC-SMD-SMT_YAGEO-CC0805KRX7R9BB472_C107153.html                                                                         |
| Capacitor (Tantalum)            | 8             | 4               | 10uF        | 3216      | TC212A106K016Y       | https://lcsc.com/product-detail/Tantalum-Capacitors_Sunlord-TC212A106K016Y_C108529.html                                                                                                 |
| Connector (LCD)                 | 2             | 1               | -           | 1x09      | C39576               | https://lcsc.com/product-detail/Pin-Header-Female-Header_BOOMELE-Boom-Precision-Elec-C39576_C39576.html                                                                                 |
| Connector (ST-Link, *optional*) | 2             | 1               | -           | 1x09      | MTF185-205SY3        | https://lcsc.com/product-detail/Pin-Header-Female-Header_MINTRON-MTF185-205SY3_C358738.html                                                                                             |
| Connector (TRS)                 | 2             | 1               | -           | -         | PJ-3136-B            | https://lcsc.com/product-detail/Audio-Video-Connectors_XKB-Connectivity-PJ-3136-B_C381131.html                                                                                          |
| Connector (USB-C)               | 2             | 1               | -           | -         | TYPE-C-31-M-12       | https://lcsc.com/product-detail/USB-Connectors_Korean-Hroparts-Elec-TYPE-C-31-M-12_C165948.html                                                                                         |
| Diode (ESD Protection)          | 4             | 2               | USBLC6-4SC6 | SOT-23-6  | USBLC6-4SC6          | https://lcsc.com/product-detail/Diodes-ESD_STMicroelectronics_USBLC6-4SC6_USBLC6-4SC6_C111212.html                                                                                      |
| Diode (Schottky)                | 2             | 1               | SS34        | SOD-123FL | DSS34                | https://lcsc.com/product-detail/Schottky-Barrier-Diodes-SBD_BORN-DSS34_C511866.html                                                                                                     |
| Diode (Signal)                  | 80            | 40              | 1N4148      | SOD-123FL | 1N4148WL             | https://lcsc.com/product-detail/Switching-Diode_Shandong-Jingdao-Microelectronics-1N4148WL_C108804.html                                                                                 |
| Diode (TVS Protection)          | 4             | 2               | SMF5.0CA    | SOD-123FL | SMF5.0CA             | https://lcsc.com/product-detail/TVS_MDD-Microdiode-Electronics-SMF5-0CA_C364279.html                                                                                                    |
| IC (Current Limiter)            | 2             | 1               | -           | SOT-23-5  | MT9700 *or* DIO7002  | https://lcsc.com/product-detail/PMIC-Power-Distribution-Switches_MT9700_C89855.html *or* https://lcsc.com/product-detail/PMIC-Power-Distribution-Switches_DIOO-DIO7002AST5_C403840.html |
| IC (MCU)                        | 2             | 1               | -           | LQFP-64   | STM32G474RET6        | https://au.mouser.com/ProductDetail/STMicroelectronics/STM32G474RET6?qs=%2Fha2pyFaduhBp7B0yN03ycB%252BZ%252BLXFeacrURrEXR6i%252Bv3eck5WgVsdQ%3D%3D                                      |
| IC (SPI FRAM)                   | 2             | 1               | 64kbit/8kB  | SOIC-8    | MB85RS64PNF-G-JNERE1 | https://lcsc.com/product-detail/FRAM_FUJITSU-MB85RS64PNF-G-JNERE1_C8741.html                                                                                                            |
| IC (Voltage Regulator)          | 2             | 1               | 3.3V        | SOT-23-5  | AP2127K-3.3TRG1      | https://lcsc.com/product-detail/Dropout-Regulators-LDO_Diodes-Incorporated-AP2127K-3-3TRG1_C156285.html                                                                                 |
| LCD                             | 2             | 1               | -           | 1x09      | 2.2" No Touch        | https://www.aliexpress.com/item/4000219159401.html                                                                                                                                      |
| MOSFET                          | 6             | 3               | -           | SOT-23-3  | AO3401A              | https://lcsc.com/product-detail/MOSFET_UMW-Youtai-Semiconductor-Co-Ltd-AO3401A_C347476.html                                                                                             |
| Piezo Buzzer                    | 2             | 1               | -           | 16x16mm   | KLJ-1625             | https://lcsc.com/product-detail/Buzzers_KELIKING-KLJ-1625_C201041.html                                                                                                                  |
| Resettable Fuse                 | 2             | 1               | 1.5A        | 1206      | MF-NSMF075-2         | https://lcsc.com/product-detail/PTC-Resettable-Fuses_BOURNS-MF-NSMF075-2_C89653.html                                                                                                    |
| Resettable Fuse                 | 2             | 1               | 3.0A        | 1206      | MF-NSMF150-2         | https://lcsc.com/product-detail/PTC-Resettable-Fuses_BOURNS-MF-NSMF150-2_C89655.html                                                                                                    |
| Resistor                        | 2             | 1               | 1.5k 1%     | 0805      | RC0805FR-071K5L      | https://lcsc.com/product-detail/Chip-Resistor-Surface-Mount_YAGEO-RC0805FR-071K5L_C114555.html                                                                                          |
| Resistor                        | 2             | 1               | 100k 1%     | 0805      | 0805W8F1003T5E       | https://lcsc.com/product-detail/Chip-Resistor-Surface-Mount_UNI-ROYAL-Uniroyal-Elec-0805W8F1003T5E_C149504.html                                                                         |
| Resistor                        | 2             | 1               | 13.7k 1%    | 0805      | CR0805F81372G        | https://lcsc.com/product-detail/Chip-Resistor-Surface-Mount_LIZ-Elec-CR0805F81372G_C101466.html                                                                                         |
| Resistor                        | 2             | 1               | 52.3k 1%    | 0805      | WR08X5232FTL         | https://lcsc.com/product-detail/Chip-Resistor-Surface-Mount_Walsin-Tech-Corp-WR08X5232FTL_C170927.html                                                                                  |
| Resistor                        | 20            | 10              | 9.1k 1%     | 0805      | RK73H2ATTD9101F      | https://lcsc.com/product-detail/Chip-Resistor-Surface-Mount_KOA-Speer-Elec-RK73H2ATTD9101F_C317276.html                                                                                 |
| Resistor                        | 4             | 2               | 120ohm 1%   | 0805      | WR08X1200FTL         | https://lcsc.com/product-detail/Chip-Resistor-Surface-Mount_Walsin-Tech-Corp-WR08X1200FTL_C163960.html                                                                                  |
| Resistor                        | 4             | 2               | 1M 1%       | 0805      | 0805W8F1004T5E       | https://lcsc.com/product-detail/Chip-Resistor-Surface-Mount_UNI-ROYAL-Uniroyal-Elec-0805W8F1004T5E_C17514.html                                                                          |
| Resistor                        | 8             | 4               | 5.1k 1%     | 0805      | 0805W8F5101T5E       | https://lcsc.com/product-detail/Chip-Resistor-Surface-Mount_UNI-ROYAL-Uniroyal-Elec-0805W8F5101T5E_C27834.html                                                                          |
| RGB LED                         | 84            | 42              | -           | 6028      | SK6812Mini-E         | https://www.aliexpress.com/item/4000475685852.html                                                                                                                                      |
| Switch (5-way Tactile)          | 2             | 1               | -           | 10x10mm   | K1-1506DN-01         | https://lcsc.com/product-detail/5-way-Tactile-Switches_Korean-Hroparts-Elec-K1-1506DN-01_C145911.html                                                                                   |
| Switch (Cap)                    | 2             | 1               | -           | -         | 6JBLK                | https://lcsc.com/product-detail/Switch-accessories-or-Caps_E-Switch-6JBLK_C273384.html                                                                                                  |
| Switch (Hotswap Socket)         | 64            | 32              | -           | -         | Kailh Hotswap        | https://www.aliexpress.com/item/32903471019.html                                                                                                                                        |
| Switch (Microswitch)            | 2             | 1               | -           | -         | TSA451G50-250        | https://lcsc.com/product-detail/Tactile-Switches_BRIGHT-TSA451G50-250_C294483.html                                                                                                      |
| Switch (Rotary Encoder)         | 2             | 1               | -           | -         | EC11N1525404         | https://lcsc.com/product-detail/Coded-Rotary-Switches_ALPS-Electric-EC11N1525404_C470748.html                                                                                           |
| Transistor (Pre-biased)         | 2             | 1               | -           | SOT-23-3  | MMUN2133LT1G         | https://lcsc.com/product-detail/Digital-Transistors_ON-Semiconductor-MMUN2133LT1G_C86182.html                                                                                           |
| Transistor (Pre-biased)         | 6             | 3               | -           | SOT-23-3  | MMUN2233LT1G         | https://lcsc.com/product-detail/Transistors-NPN-PNP_ON-Semiconductor-MMUN2233LT1G_C86932.html                                                                                           |


## Fasteners / Hardware

| Type                  | Count (Total) | Count (Per side) | Model        | Link                                               |
|-----------------------|---------------|------------------|--------------|----------------------------------------------------|
| Knob (Rotary Encoder) | 2             | 1                | 25x15.5x6mm  | https://www.aliexpress.com/item/32802067713.html   |
| Screw                 | 26            | 13               | M3x3 D7x0.7  | https://www.aliexpress.com/item/32998579840.html   |
| Screw                 | 26            | 13               | M3x8 D7x0.7  | https://www.aliexpress.com/item/32998579840.html   |
| Screw                 | 8             | 4                | M3x12 D7x0.7 | https://www.aliexpress.com/item/32998579840.html   |
| Screw                 | 8             | 4                | M3x5 D7x0.7  | https://www.aliexpress.com/item/32998579840.html   |
| Standoff              | 52 (or 60)    | 26 (or 30)       | M3x3x4.2     | https://www.aliexpress.com/item/4000153040875.html |
| Standoff              | 8             | 4                | M3x12x4.2    | https://www.aliexpress.com/item/4000153040875.html |
| Standoff              | 8             | 4                | M3x4x4.2     | https://www.aliexpress.com/item/4000153040875.html |
| Washer                | 26            | 13               | M3           | https://www.aliexpress.com/item/33000267180.html   |